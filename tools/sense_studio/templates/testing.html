{% extends 'skeleton.html' %}

{% block title %} Testing {% endblock %}

{% block navigation %}
    {% include 'navigation.html' %}
{% endblock navigation %}

{% block settings %}
    {% include 'settings.html' %}
{% endblock settings %}

{% block main %}
<div class="uk-container uk-container-xsmall">
    <h1 class="uk-heading-medium uk-margin-large-top uk-margin-remove-bottom">Testing</h1>
    <div class="uk-text-meta uk-text-large uk-margin-medium-bottom">
        <span uk-icon="icon: folder"></span> {{ path }}
    </div>
    <form class="uk-form-horizontal" method="post">
        <input type="hidden" id="project" name="project" value="{{ project }}">
        <input type="hidden" id="path" name="path" value="{{ path }}">

        <div class="uk-margin">
            <label class="uk-form-label" for="classifier">Custom Classifier</label>
             <div class="uk-form-controls">
                <select class="uk-select" id="classifier">
                    {% if classifiers %}
                        {% for classifier in classifiers %}
                            <option>{{ classifier }}</option>
                        {% endfor %}
                    {% else %}
                        <option value="">No classifiers to select from</option>
                    {% endif %}
                </select>
            </div>
        </div>

        <div class="uk-margin">
            <label class="uk-form-label" for="title">Window Title</label>
            <div class="uk-form-controls">
                <div class="uk-inline uk-width-1-1">
                    <span class="uk-form-icon" uk-icon="icon: pencil"></span>
                    <input class="uk-input" type="text" id="title" placeholder="Title" autocomplete="off" />
                </div>
            </div>
        </div>

        <div class="uk-margin">
            <label class="uk-form-label">Choose Input Source</label>
             <div class="uk-form-controls">
                 <div class="uk-inline uk-width-1-1">
                    <label>
                        <input class="uk-radio" type="radio" name="inputSource" value="0" onclick="toggleInputVideoField();" checked>
                        &nbsp;&nbsp;Use Webcam
                    </label>
                    <label class="uk-margin-large-left">
                        <input class="uk-radio" type="radio" name="inputSource" value="1" onclick="toggleInputVideoField();">
                        &nbsp;&nbsp;Input Video
                    </label>
                 </div>
            </div>
        </div>

            <!-- TODO: Check if needed or not -->
<!--            <div>-->
<!--                 <div class="uk-form-controls uk-form-large uk-hidden">-->
<!--                     <div class="uk-width-1-1 uk-margin-small-top">-->
<!--                        <label>-->
<!--                            <input class="uk-checkbox" type="checkbox" name="saveVideo" onclick="toggleOutputVideoField();">-->
<!--                            &nbsp;&nbsp;Save Output Video-->
<!--                        </label>-->
<!--                     </div>-->
<!--                </div>-->
<!--            </div>-->


        <div id="inputVideoDiv" class="uk-margin uk-hidden">
            <label class="uk-form-label" for="inputVideoPath">Input video path</label>
            <label class="uk-form-label uk-text-danger" id="inputVideoPathLabel"></label>
            <div class="uk-form-controls">
                <div class="uk-inline uk-width-1-1">
                    <span class="uk-form-icon" uk-icon="icon: video-camera"></span>
                    <input class="uk-input file-path-search" type="text" id="inputVideoPath" placeholder="/path/to/input-video"
                           autocomplete="off" oninput="getPathInputs('inputVideoPathLabel', 'inputVideoPath');">
                </div>
            </div>
        </div>


         <div id="outputVideoDiv" class="uk-margin uk-hidden">
            <label class="uk-form-label" for="outputVideoName">
                Output video name ({{ output_path_prefix }}..) <span class="uk-label">.mp4</span>
            </label>
            <div class="uk-form-controls">
                <div class="uk-inline uk-width-1-1">
                    <span class="uk-form-icon" uk-icon="icon: video-camera"></span>
                    <input class="uk-input" type="text" id="outputVideoName" placeholder="Output video name"
                           autocomplete="off">
                </div>
            </div>
        </div>

        <div class="uk-form-controls">
            <button class="uk-button uk-button-primary" id="btnTest" type="button" tabindex="0"
                onclick="startTesting('{{ url_for('.start_testing') }}');">
                Test model
            </button>
            <button class="uk-button uk-button-danger uk-margin-left" id="btnCancelTest" type="button" tabindex="1"
                onclick="cancelTesting('{{ url_for('.cancel_testing') }}');" disabled>
                Cancel
            </button>
        </div>
    </form>

    <!--    Output video streaming frame-wise (Automatically filled) -->
    <div id="videoStream" class="uk-margin uk-text-center">
        <h4> Output Video Stream</h4>
        <div class="uk-section uk-section-muted uk-padding-remove-vertical uk-inline">
            <img id="frame" src="" height="480" width="640">
        </div>
    </div>

    <div id="testTerminal" class="uk-section uk-section-secondary uk-padding-small" >
    </div>

</div>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='testing.js') }}"></script>
{% endblock %}
